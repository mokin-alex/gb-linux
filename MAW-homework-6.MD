Задание 1.
1.1 Фаервол: В Ubuntu используется оболочка под названием UFW или  Uncomplicated FireWall
(Либо ее графический аналог - Gufw)
Запретим по-умолчанию все входящие соединиения и разрешим исходящие. 
`
ale@dv6:~$ sudo ufw default deny incoming
ale@dv6:~$ sudo ufw default allow outgoing
ale@dv6:~$ sudo ufw allow OpenSSH
ale@dv6:~$ sudo ufw allow 80/tcp
ale@dv6:~$ sudo ufw allow 443/tcp
ale@dv6:~$ sudo ufw enable
Межсетевой экран включён и будет запускаться при запуске системы
`
1.2 Nginx установлен.
    Конфигурация /etc/nginx/conf.d/dv6.conf прилагается
    Строка запуска curl:
ale@dv6:~$ curl http://localhost -H "Host: dv6" -H "user: alex"
Hi alex ! 
ale@dv6:~$ curl http://localhost -H "Host: dv6"
Page not found
`

Задание 2.
2.1 Самоподписанный сертификат - он отличается тем что сертификат подписан (и издан) самолично, вместо подписания удостоверяющим центром, которому доверяют браузеры и ОС.
Создаем сертификат одной коммандой, где
-x509 - для самоподписанныйх сертификатов
-nodes - без использования пароля
-subj - этот тот кому принадлежит сертификат
`
ale@dv6:~# sudo openssl req -x509 -nodes -newkey rsa:2048 -days 365 -keyout /etc/ssl/private/dv6.key -out /etc/ssl/certs/dv6.crt -subj /C=RU/ST=45/L=Kurgan/O=MAW/CN=dv6.net
`
2.2 Для работы по SSL раскомментируем соответсвующие строки в файле дефотного сервера - /etc/nginx/sites-enables/@default  (прилагаю)
`
	listen 443 ssl default_server;
	listen [::]:443 ssl default_server;
`
а так же строку с конфигурацией  самоподписанного сертификата
`
	#include snippets/snakeoil.conf;
	include snippets/dv6.conf;
`
файл snippets/dv6.conf содержит пути к сертификату и приватному ключу
`
ssl_certificate /etc/ssl/certs/dv6.crt;
ssl_certificate_key /etc/ssl/private/dv6.key;
`
2.3 Браузер реагирует на самоподписанный сертификат тревожно :) Предупреждает, что это не безопасно, так как теоретически любой может создать подобный сертификат.
Вначале установления соединения (рукопожатия) используется асимметричный алгоритм шифрования, он достаточно ресурсоемкий, но после того как стороны 
обменяются секретными ключами, обмен проиходит по симметричному алгоритму, так как этот способ менее ресурсоемкий, так достигается надежность и быстродействие.


Задание 3
3.1 Поднял Nginx на другой тестовой машине, сгенерировал самоподписанный сертификат для www.cons45.ru 
3.2 На внешнем роутере с белым адресом 78.108.70.218 пробросил порты 80 и 443 во внутренню сеть, на тестовую машину.
И сайт стал доступен по данному адресу! по http://78.108.70.218  и https протоколам.
3.3 У DNS-регистратора прописал A-запись для поддомена www.cons45.ru адрес 78.108.70.218
На данный момент 16-04-2020 14:00 МСК сайт еще не резолвится по доменному имени. Не прошло обновление зоны на dns-серверах
3.4. прописал у себя локально в c:\windows\dreivers\etc\hosts  имя и адрес 78.108.70.218 - сайт открывается!









